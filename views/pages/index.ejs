<%- include('../partials/head.ejs'); %>
<%- include('../partials/nav.ejs'); %>

<body class="m-t-100">
  <main class="container">
    <table border="0">
      <thead>
        <th><%- getLink(state, order, "Country", "Country"); %></th>
        <th><%- getLink(state, order, "NewConfirmed", "New Confirmed"); %></th>
        <th><%- getLink(state, order, "TotalConfirmed", "Total Confirmed"); %></th>
        <th><%- getLink(state, order, "NewDeaths", "New Deaths"); %></th>
        <th><%- getLink(state, order, "TotalDeaths", "Total Deaths"); %></th>
        <th><%- getLink(state, order, "NewRecovered", "New Recovered"); %></th>
        <th><%- getLink(state, order, "TotalRecovered", "Total Recovered"); %></th>
      </thead>
      <tbody>

      <% result.forEach(item => {
        const {
          Country,
          CountryCode,
          NewConfirmed, 
          TotalConfirmed,
          NewDeaths,
          TotalDeaths,
          NewRecovered,
          TotalRecovered
        } = item; 
        if (Country) { %>
        <tr>
          <td><span class="flag"><%= emojiFlags.countryCode(CountryCode).emoji %></span><span class="link"><a id='<%= Country %>' href='/chart?country=<%= Country %>&CountryCode=<%= CountryCode %>&NewConfirmed=<%= NewConfirmed %>&TotalConfirmed=<%= TotalConfirmed %>&NewDeaths=<%= NewDeaths %>&TotalDeaths=<%= TotalDeaths %>&NewRecovered=<%= NewRecovered %>&TotalRecovered=<%= TotalRecovered %>'><%= Country %></a></link></td>
          <td><%= NewConfirmed.toLocaleString('en') %></td>
          <td><%= TotalConfirmed.toLocaleString('en') %></td>
          <td><%= NewDeaths.toLocaleString('en') %></td>
          <td><%= TotalDeaths.toLocaleString('en') %></td>
          <td><%= NewRecovered.toLocaleString('en') %></td>
          <td><%= TotalRecovered.toLocaleString('en') %></td>
        </tr>
      <% }}); %>

      </tbody>
    </table>
  </main>

  <%- include("../partials/footer.ejs") %>

</body>
</html>